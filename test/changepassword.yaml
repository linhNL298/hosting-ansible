- name: Change root password
  hosts: all
  become: yes  # This ensures that the task runs with elevated privileges
  vars_files:
    - password.yaml
  tasks:
    - name: Debug passwords variable
      debug:
        var: passwords

    - name: Debug specific password
      debug:
        msg: "Password for {{ inventory_hostname }} is {{ passwords[inventory_hostname] }}"

    - name: Change root password for user
      user:
        name: "root"
        password: "{{ passwords[inventory_hostname] | password_hash('sha512') }}"
